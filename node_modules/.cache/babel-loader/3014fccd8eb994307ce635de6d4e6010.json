{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport { useRef, useState } from 'react';\nimport Align from 'rc-align';\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport CSSMotion from 'rc-motion';\nimport classNames from 'classnames';\nimport useVisibleStatus from \"./useVisibleStatus\";\nimport { getMotion } from \"../utils/legacyUtil\";\nimport useStretchStyle from \"./useStretchStyle\";\nvar PopupInner = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var visible = props.visible,\n      prefixCls = props.prefixCls,\n      className = props.className,\n      style = props.style,\n      children = props.children,\n      zIndex = props.zIndex,\n      stretch = props.stretch,\n      destroyPopupOnHide = props.destroyPopupOnHide,\n      forceRender = props.forceRender,\n      align = props.align,\n      point = props.point,\n      getRootDomNode = props.getRootDomNode,\n      getClassNameFromAlign = props.getClassNameFromAlign,\n      onAlign = props.onAlign,\n      onMouseEnter = props.onMouseEnter,\n      onMouseLeave = props.onMouseLeave,\n      onMouseDown = props.onMouseDown,\n      onTouchStart = props.onTouchStart,\n      onClick = props.onClick;\n  var alignRef = useRef();\n  var elementRef = useRef();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      alignedClassName = _useState2[0],\n      setAlignedClassName = _useState2[1]; // ======================= Measure ========================\n\n\n  var _useStretchStyle = useStretchStyle(stretch),\n      _useStretchStyle2 = _slicedToArray(_useStretchStyle, 2),\n      stretchStyle = _useStretchStyle2[0],\n      measureStretchStyle = _useStretchStyle2[1];\n\n  function doMeasure() {\n    if (stretch) {\n      measureStretchStyle(getRootDomNode());\n    }\n  } // ======================== Status ========================\n\n\n  var _useVisibleStatus = useVisibleStatus(visible, doMeasure),\n      _useVisibleStatus2 = _slicedToArray(_useVisibleStatus, 2),\n      status = _useVisibleStatus2[0],\n      goNextStatus = _useVisibleStatus2[1]; // ======================== Aligns ========================\n\n  /**\n   * `alignedClassName` may modify `source` size,\n   * which means one time align may not move to the correct position at once.\n   *\n   * We will reset `alignTimes` for each status switch to `alignPre`\n   * and let `rc-align` to align for multiple times to ensure get final stable place.\n   * Currently we mark `alignTimes < 2` repeat align, it will increase if user report for align issue.\n   * \n   * Update:\n   * In React 18. `rc-align` effect of align may faster than ref called trigger `forceAlign`.\n   * We adjust this to `alignTimes < 2`.\n   * We need refactor `rc-align` to support mark of `forceAlign` call if this still happen.\n   */\n\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      alignTimes = _useState4[0],\n      setAlignTimes = _useState4[1];\n\n  var prepareResolveRef = useRef();\n  useLayoutEffect(function () {\n    if (status === 'alignPre') {\n      setAlignTimes(0);\n    }\n  }, [status]); // `target` on `rc-align` can accept as a function to get the bind element or a point.\n  // ref: https://www.npmjs.com/package/rc-align\n\n  function getAlignTarget() {\n    if (point) {\n      return point;\n    }\n\n    return getRootDomNode;\n  }\n\n  function forceAlign() {\n    var _alignRef$current;\n\n    (_alignRef$current = alignRef.current) === null || _alignRef$current === void 0 ? void 0 : _alignRef$current.forceAlign();\n  }\n\n  function onInternalAlign(popupDomNode, matchAlign) {\n    var nextAlignedClassName = getClassNameFromAlign(matchAlign);\n\n    if (alignedClassName !== nextAlignedClassName) {\n      setAlignedClassName(nextAlignedClassName);\n    } // We will retry multi times to make sure that the element has been align in the right position.\n\n\n    setAlignTimes(function (val) {\n      return val + 1;\n    });\n\n    if (status === 'align') {\n      onAlign === null || onAlign === void 0 ? void 0 : onAlign(popupDomNode, matchAlign);\n    }\n  } // Delay to go to next status\n\n\n  useLayoutEffect(function () {\n    if (status === 'align') {\n      // Repeat until not more align needed\n      if (alignTimes < 3) {\n        forceAlign();\n      } else {\n        goNextStatus(function () {\n          var _prepareResolveRef$cu;\n\n          (_prepareResolveRef$cu = prepareResolveRef.current) === null || _prepareResolveRef$cu === void 0 ? void 0 : _prepareResolveRef$cu.call(prepareResolveRef);\n        });\n      }\n    }\n  }, [alignTimes]); // ======================== Motion ========================\n\n  var motion = _objectSpread({}, getMotion(props));\n\n  ['onAppearEnd', 'onEnterEnd', 'onLeaveEnd'].forEach(function (eventName) {\n    var originHandler = motion[eventName];\n\n    motion[eventName] = function (element, event) {\n      goNextStatus();\n      return originHandler === null || originHandler === void 0 ? void 0 : originHandler(element, event);\n    };\n  });\n\n  function onShowPrepare() {\n    return new Promise(function (resolve) {\n      prepareResolveRef.current = resolve;\n    });\n  } // Go to stable directly when motion not provided\n\n\n  React.useEffect(function () {\n    if (!motion.motionName && status === 'motion') {\n      goNextStatus();\n    }\n  }, [motion.motionName, status]); // ========================= Refs =========================\n\n  React.useImperativeHandle(ref, function () {\n    return {\n      forceAlign: forceAlign,\n      getElement: function getElement() {\n        return elementRef.current;\n      }\n    };\n  }); // ======================== Render ========================\n\n  var mergedStyle = _objectSpread(_objectSpread({}, stretchStyle), {}, {\n    zIndex: zIndex,\n    opacity: status === 'motion' || status === 'stable' || !visible ? undefined : 0,\n    // Cannot interact with disappearing elements\n    // https://github.com/ant-design/ant-design/issues/35051#issuecomment-1101340714\n    pointerEvents: !visible && status !== 'stable' ? 'none' : undefined\n  }, style); // Align status\n\n\n  var alignDisabled = true;\n\n  if (align !== null && align !== void 0 && align.points && (status === 'align' || status === 'stable')) {\n    alignDisabled = false;\n  }\n\n  var childNode = children; // Wrapper when multiple children\n\n  if (React.Children.count(children) > 1) {\n    childNode = /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-content\")\n    }, children);\n  }\n\n  return /*#__PURE__*/React.createElement(CSSMotion, _extends({\n    visible: visible,\n    ref: elementRef,\n    leavedClassName: \"\".concat(prefixCls, \"-hidden\")\n  }, motion, {\n    onAppearPrepare: onShowPrepare,\n    onEnterPrepare: onShowPrepare,\n    removeOnLeave: destroyPopupOnHide,\n    forceRender: forceRender\n  }), function (_ref, motionRef) {\n    var motionClassName = _ref.className,\n        motionStyle = _ref.style;\n    var mergedClassName = classNames(prefixCls, className, alignedClassName, motionClassName);\n    return /*#__PURE__*/React.createElement(Align, {\n      target: getAlignTarget(),\n      key: \"popup\",\n      ref: alignRef,\n      monitorWindowResize: true,\n      disabled: alignDisabled,\n      align: align,\n      onAlign: onInternalAlign\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      ref: motionRef,\n      className: mergedClassName,\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      onMouseDownCapture: onMouseDown,\n      onTouchStartCapture: onTouchStart,\n      onClick: onClick,\n      style: _objectSpread(_objectSpread({}, motionStyle), mergedStyle)\n    }, childNode));\n  });\n});\nPopupInner.displayName = 'PopupInner';\nexport default PopupInner;","map":{"version":3,"sources":["/Users/luna/Desktop/Project/Git Project/rick-Morty/node_modules/rc-trigger/es/Popup/PopupInner.js"],"names":["_extends","_objectSpread","_slicedToArray","React","useRef","useState","Align","useLayoutEffect","CSSMotion","classNames","useVisibleStatus","getMotion","useStretchStyle","PopupInner","forwardRef","props","ref","visible","prefixCls","className","style","children","zIndex","stretch","destroyPopupOnHide","forceRender","align","point","getRootDomNode","getClassNameFromAlign","onAlign","onMouseEnter","onMouseLeave","onMouseDown","onTouchStart","onClick","alignRef","elementRef","_useState","_useState2","alignedClassName","setAlignedClassName","_useStretchStyle","_useStretchStyle2","stretchStyle","measureStretchStyle","doMeasure","_useVisibleStatus","_useVisibleStatus2","status","goNextStatus","_useState3","_useState4","alignTimes","setAlignTimes","prepareResolveRef","getAlignTarget","forceAlign","_alignRef$current","current","onInternalAlign","popupDomNode","matchAlign","nextAlignedClassName","val","_prepareResolveRef$cu","call","motion","forEach","eventName","originHandler","element","event","onShowPrepare","Promise","resolve","useEffect","motionName","useImperativeHandle","getElement","mergedStyle","opacity","undefined","pointerEvents","alignDisabled","points","childNode","Children","count","createElement","concat","leavedClassName","onAppearPrepare","onEnterPrepare","removeOnLeave","_ref","motionRef","motionClassName","motionStyle","mergedClassName","target","key","monitorWindowResize","disabled","onMouseDownCapture","onTouchStartCapture","displayName"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport { useRef, useState } from 'react';\nimport Align from 'rc-align';\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport CSSMotion from 'rc-motion';\nimport classNames from 'classnames';\nimport useVisibleStatus from \"./useVisibleStatus\";\nimport { getMotion } from \"../utils/legacyUtil\";\nimport useStretchStyle from \"./useStretchStyle\";\nvar PopupInner = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var visible = props.visible,\n      prefixCls = props.prefixCls,\n      className = props.className,\n      style = props.style,\n      children = props.children,\n      zIndex = props.zIndex,\n      stretch = props.stretch,\n      destroyPopupOnHide = props.destroyPopupOnHide,\n      forceRender = props.forceRender,\n      align = props.align,\n      point = props.point,\n      getRootDomNode = props.getRootDomNode,\n      getClassNameFromAlign = props.getClassNameFromAlign,\n      onAlign = props.onAlign,\n      onMouseEnter = props.onMouseEnter,\n      onMouseLeave = props.onMouseLeave,\n      onMouseDown = props.onMouseDown,\n      onTouchStart = props.onTouchStart,\n      onClick = props.onClick;\n  var alignRef = useRef();\n  var elementRef = useRef();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      alignedClassName = _useState2[0],\n      setAlignedClassName = _useState2[1]; // ======================= Measure ========================\n\n\n  var _useStretchStyle = useStretchStyle(stretch),\n      _useStretchStyle2 = _slicedToArray(_useStretchStyle, 2),\n      stretchStyle = _useStretchStyle2[0],\n      measureStretchStyle = _useStretchStyle2[1];\n\n  function doMeasure() {\n    if (stretch) {\n      measureStretchStyle(getRootDomNode());\n    }\n  } // ======================== Status ========================\n\n\n  var _useVisibleStatus = useVisibleStatus(visible, doMeasure),\n      _useVisibleStatus2 = _slicedToArray(_useVisibleStatus, 2),\n      status = _useVisibleStatus2[0],\n      goNextStatus = _useVisibleStatus2[1]; // ======================== Aligns ========================\n\n  /**\n   * `alignedClassName` may modify `source` size,\n   * which means one time align may not move to the correct position at once.\n   *\n   * We will reset `alignTimes` for each status switch to `alignPre`\n   * and let `rc-align` to align for multiple times to ensure get final stable place.\n   * Currently we mark `alignTimes < 2` repeat align, it will increase if user report for align issue.\n   * \n   * Update:\n   * In React 18. `rc-align` effect of align may faster than ref called trigger `forceAlign`.\n   * We adjust this to `alignTimes < 2`.\n   * We need refactor `rc-align` to support mark of `forceAlign` call if this still happen.\n   */\n\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      alignTimes = _useState4[0],\n      setAlignTimes = _useState4[1];\n\n  var prepareResolveRef = useRef();\n  useLayoutEffect(function () {\n    if (status === 'alignPre') {\n      setAlignTimes(0);\n    }\n  }, [status]); // `target` on `rc-align` can accept as a function to get the bind element or a point.\n  // ref: https://www.npmjs.com/package/rc-align\n\n  function getAlignTarget() {\n    if (point) {\n      return point;\n    }\n\n    return getRootDomNode;\n  }\n\n  function forceAlign() {\n    var _alignRef$current;\n\n    (_alignRef$current = alignRef.current) === null || _alignRef$current === void 0 ? void 0 : _alignRef$current.forceAlign();\n  }\n\n  function onInternalAlign(popupDomNode, matchAlign) {\n    var nextAlignedClassName = getClassNameFromAlign(matchAlign);\n\n    if (alignedClassName !== nextAlignedClassName) {\n      setAlignedClassName(nextAlignedClassName);\n    } // We will retry multi times to make sure that the element has been align in the right position.\n\n\n    setAlignTimes(function (val) {\n      return val + 1;\n    });\n\n    if (status === 'align') {\n      onAlign === null || onAlign === void 0 ? void 0 : onAlign(popupDomNode, matchAlign);\n    }\n  } // Delay to go to next status\n\n\n  useLayoutEffect(function () {\n    if (status === 'align') {\n      // Repeat until not more align needed\n      if (alignTimes < 3) {\n        forceAlign();\n      } else {\n        goNextStatus(function () {\n          var _prepareResolveRef$cu;\n\n          (_prepareResolveRef$cu = prepareResolveRef.current) === null || _prepareResolveRef$cu === void 0 ? void 0 : _prepareResolveRef$cu.call(prepareResolveRef);\n        });\n      }\n    }\n  }, [alignTimes]); // ======================== Motion ========================\n\n  var motion = _objectSpread({}, getMotion(props));\n\n  ['onAppearEnd', 'onEnterEnd', 'onLeaveEnd'].forEach(function (eventName) {\n    var originHandler = motion[eventName];\n\n    motion[eventName] = function (element, event) {\n      goNextStatus();\n      return originHandler === null || originHandler === void 0 ? void 0 : originHandler(element, event);\n    };\n  });\n\n  function onShowPrepare() {\n    return new Promise(function (resolve) {\n      prepareResolveRef.current = resolve;\n    });\n  } // Go to stable directly when motion not provided\n\n\n  React.useEffect(function () {\n    if (!motion.motionName && status === 'motion') {\n      goNextStatus();\n    }\n  }, [motion.motionName, status]); // ========================= Refs =========================\n\n  React.useImperativeHandle(ref, function () {\n    return {\n      forceAlign: forceAlign,\n      getElement: function getElement() {\n        return elementRef.current;\n      }\n    };\n  }); // ======================== Render ========================\n\n  var mergedStyle = _objectSpread(_objectSpread({}, stretchStyle), {}, {\n    zIndex: zIndex,\n    opacity: status === 'motion' || status === 'stable' || !visible ? undefined : 0,\n    // Cannot interact with disappearing elements\n    // https://github.com/ant-design/ant-design/issues/35051#issuecomment-1101340714\n    pointerEvents: !visible && status !== 'stable' ? 'none' : undefined\n  }, style); // Align status\n\n\n  var alignDisabled = true;\n\n  if (align !== null && align !== void 0 && align.points && (status === 'align' || status === 'stable')) {\n    alignDisabled = false;\n  }\n\n  var childNode = children; // Wrapper when multiple children\n\n  if (React.Children.count(children) > 1) {\n    childNode = /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-content\")\n    }, children);\n  }\n\n  return /*#__PURE__*/React.createElement(CSSMotion, _extends({\n    visible: visible,\n    ref: elementRef,\n    leavedClassName: \"\".concat(prefixCls, \"-hidden\")\n  }, motion, {\n    onAppearPrepare: onShowPrepare,\n    onEnterPrepare: onShowPrepare,\n    removeOnLeave: destroyPopupOnHide,\n    forceRender: forceRender\n  }), function (_ref, motionRef) {\n    var motionClassName = _ref.className,\n        motionStyle = _ref.style;\n    var mergedClassName = classNames(prefixCls, className, alignedClassName, motionClassName);\n    return /*#__PURE__*/React.createElement(Align, {\n      target: getAlignTarget(),\n      key: \"popup\",\n      ref: alignRef,\n      monitorWindowResize: true,\n      disabled: alignDisabled,\n      align: align,\n      onAlign: onInternalAlign\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      ref: motionRef,\n      className: mergedClassName,\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      onMouseDownCapture: onMouseDown,\n      onTouchStartCapture: onTouchStart,\n      onClick: onClick,\n      style: _objectSpread(_objectSpread({}, motionStyle), mergedStyle)\n    }, childNode));\n  });\n});\nPopupInner.displayName = 'PopupInner';\nexport default PopupInner;"]},"metadata":{},"sourceType":"module"}