{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport warning from \"rc-util/es/warning\";\nimport * as React from 'react';\nimport { INTERNAL_HOOKS } from \"../Table\";\nimport { findAllChildrenKeys, renderExpandIcon } from \"../utils/expandUtil\";\nimport { getExpandableProps } from \"../utils/legacyUtil\";\nexport default function useExpand(props, mergedData, getRowKey) {\n  var expandableConfig = getExpandableProps(props);\n  var expandIcon = expandableConfig.expandIcon,\n      expandedRowKeys = expandableConfig.expandedRowKeys,\n      defaultExpandedRowKeys = expandableConfig.defaultExpandedRowKeys,\n      defaultExpandAllRows = expandableConfig.defaultExpandAllRows,\n      expandedRowRender = expandableConfig.expandedRowRender,\n      onExpand = expandableConfig.onExpand,\n      onExpandedRowsChange = expandableConfig.onExpandedRowsChange,\n      childrenColumnName = expandableConfig.childrenColumnName;\n  var mergedExpandIcon = expandIcon || renderExpandIcon;\n  var mergedChildrenColumnName = childrenColumnName || 'children';\n  var expandableType = React.useMemo(function () {\n    if (expandedRowRender) {\n      return 'row';\n    }\n    /* eslint-disable no-underscore-dangle */\n\n    /**\n     * Fix https://github.com/ant-design/ant-design/issues/21154\n     * This is a workaround to not to break current behavior.\n     * We can remove follow code after final release.\n     *\n     * To other developer:\n     *  Do not use `__PARENT_RENDER_ICON__` in prod since we will remove this when refactor\n     */\n\n\n    if (props.expandable && props.internalHooks === INTERNAL_HOOKS && props.expandable.__PARENT_RENDER_ICON__ || mergedData.some(function (record) {\n      return record && _typeof(record) === 'object' && record[mergedChildrenColumnName];\n    })) {\n      return 'nest';\n    }\n    /* eslint-enable */\n\n\n    return false;\n  }, [!!expandedRowRender, mergedData]);\n\n  var _React$useState = React.useState(function () {\n    if (defaultExpandedRowKeys) {\n      return defaultExpandedRowKeys;\n    }\n\n    if (defaultExpandAllRows) {\n      return findAllChildrenKeys(mergedData, getRowKey, mergedChildrenColumnName);\n    }\n\n    return [];\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      innerExpandedKeys = _React$useState2[0],\n      setInnerExpandedKeys = _React$useState2[1];\n\n  var mergedExpandedKeys = React.useMemo(function () {\n    return new Set(expandedRowKeys || innerExpandedKeys || []);\n  }, [expandedRowKeys, innerExpandedKeys]);\n  var onTriggerExpand = React.useCallback(function (record) {\n    var key = getRowKey(record, mergedData.indexOf(record));\n    var newExpandedKeys;\n    var hasKey = mergedExpandedKeys.has(key);\n\n    if (hasKey) {\n      mergedExpandedKeys.delete(key);\n      newExpandedKeys = _toConsumableArray(mergedExpandedKeys);\n    } else {\n      newExpandedKeys = [].concat(_toConsumableArray(mergedExpandedKeys), [key]);\n    }\n\n    setInnerExpandedKeys(newExpandedKeys);\n\n    if (onExpand) {\n      onExpand(!hasKey, record);\n    }\n\n    if (onExpandedRowsChange) {\n      onExpandedRowsChange(newExpandedKeys);\n    }\n  }, [getRowKey, mergedExpandedKeys, mergedData, onExpand, onExpandedRowsChange]); // Warning if use `expandedRowRender` and nest children in the same time\n\n  if (process.env.NODE_ENV !== 'production' && expandedRowRender && mergedData.some(function (record) {\n    return Array.isArray(record === null || record === void 0 ? void 0 : record[mergedChildrenColumnName]);\n  })) {\n    warning(false, '`expandedRowRender` should not use with nested Table');\n  }\n\n  return [expandableConfig, expandableType, mergedExpandedKeys, mergedExpandIcon, mergedChildrenColumnName, onTriggerExpand];\n}","map":{"version":3,"sources":["/Users/luna/Desktop/Project/Git Project/rick-Morty/node_modules/rc-table/es/hooks/useExpand.js"],"names":["_toConsumableArray","_slicedToArray","_typeof","warning","React","INTERNAL_HOOKS","findAllChildrenKeys","renderExpandIcon","getExpandableProps","useExpand","props","mergedData","getRowKey","expandableConfig","expandIcon","expandedRowKeys","defaultExpandedRowKeys","defaultExpandAllRows","expandedRowRender","onExpand","onExpandedRowsChange","childrenColumnName","mergedExpandIcon","mergedChildrenColumnName","expandableType","useMemo","expandable","internalHooks","__PARENT_RENDER_ICON__","some","record","_React$useState","useState","_React$useState2","innerExpandedKeys","setInnerExpandedKeys","mergedExpandedKeys","Set","onTriggerExpand","useCallback","key","indexOf","newExpandedKeys","hasKey","has","delete","concat","process","env","NODE_ENV","Array","isArray"],"mappings":"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","sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport warning from \"rc-util/es/warning\";\nimport * as React from 'react';\nimport { INTERNAL_HOOKS } from \"../Table\";\nimport { findAllChildrenKeys, renderExpandIcon } from \"../utils/expandUtil\";\nimport { getExpandableProps } from \"../utils/legacyUtil\";\nexport default function useExpand(props, mergedData, getRowKey) {\n  var expandableConfig = getExpandableProps(props);\n  var expandIcon = expandableConfig.expandIcon,\n    expandedRowKeys = expandableConfig.expandedRowKeys,\n    defaultExpandedRowKeys = expandableConfig.defaultExpandedRowKeys,\n    defaultExpandAllRows = expandableConfig.defaultExpandAllRows,\n    expandedRowRender = expandableConfig.expandedRowRender,\n    onExpand = expandableConfig.onExpand,\n    onExpandedRowsChange = expandableConfig.onExpandedRowsChange,\n    childrenColumnName = expandableConfig.childrenColumnName;\n  var mergedExpandIcon = expandIcon || renderExpandIcon;\n  var mergedChildrenColumnName = childrenColumnName || 'children';\n  var expandableType = React.useMemo(function () {\n    if (expandedRowRender) {\n      return 'row';\n    }\n    /* eslint-disable no-underscore-dangle */\n    /**\n     * Fix https://github.com/ant-design/ant-design/issues/21154\n     * This is a workaround to not to break current behavior.\n     * We can remove follow code after final release.\n     *\n     * To other developer:\n     *  Do not use `__PARENT_RENDER_ICON__` in prod since we will remove this when refactor\n     */\n    if (props.expandable && props.internalHooks === INTERNAL_HOOKS && props.expandable.__PARENT_RENDER_ICON__ || mergedData.some(function (record) {\n      return record && _typeof(record) === 'object' && record[mergedChildrenColumnName];\n    })) {\n      return 'nest';\n    }\n    /* eslint-enable */\n    return false;\n  }, [!!expandedRowRender, mergedData]);\n  var _React$useState = React.useState(function () {\n      if (defaultExpandedRowKeys) {\n        return defaultExpandedRowKeys;\n      }\n      if (defaultExpandAllRows) {\n        return findAllChildrenKeys(mergedData, getRowKey, mergedChildrenColumnName);\n      }\n      return [];\n    }),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    innerExpandedKeys = _React$useState2[0],\n    setInnerExpandedKeys = _React$useState2[1];\n  var mergedExpandedKeys = React.useMemo(function () {\n    return new Set(expandedRowKeys || innerExpandedKeys || []);\n  }, [expandedRowKeys, innerExpandedKeys]);\n  var onTriggerExpand = React.useCallback(function (record) {\n    var key = getRowKey(record, mergedData.indexOf(record));\n    var newExpandedKeys;\n    var hasKey = mergedExpandedKeys.has(key);\n    if (hasKey) {\n      mergedExpandedKeys.delete(key);\n      newExpandedKeys = _toConsumableArray(mergedExpandedKeys);\n    } else {\n      newExpandedKeys = [].concat(_toConsumableArray(mergedExpandedKeys), [key]);\n    }\n    setInnerExpandedKeys(newExpandedKeys);\n    if (onExpand) {\n      onExpand(!hasKey, record);\n    }\n    if (onExpandedRowsChange) {\n      onExpandedRowsChange(newExpandedKeys);\n    }\n  }, [getRowKey, mergedExpandedKeys, mergedData, onExpand, onExpandedRowsChange]);\n\n  // Warning if use `expandedRowRender` and nest children in the same time\n  if (process.env.NODE_ENV !== 'production' && expandedRowRender && mergedData.some(function (record) {\n    return Array.isArray(record === null || record === void 0 ? void 0 : record[mergedChildrenColumnName]);\n  })) {\n    warning(false, '`expandedRowRender` should not use with nested Table');\n  }\n  return [expandableConfig, expandableType, mergedExpandedKeys, mergedExpandIcon, mergedChildrenColumnName, onTriggerExpand];\n}"]},"metadata":{},"sourceType":"module"}