{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"src\", \"alt\", \"onPreviewClose\", \"prefixCls\", \"previewPrefixCls\", \"placeholder\", \"fallback\", \"width\", \"height\", \"style\", \"preview\", \"className\", \"onClick\", \"onError\", \"wrapperClassName\", \"wrapperStyle\", \"rootClassName\", \"crossOrigin\", \"decoding\", \"loading\", \"referrerPolicy\", \"sizes\", \"srcSet\", \"useMap\", \"draggable\"],\n    _excluded2 = [\"src\", \"visible\", \"onVisibleChange\", \"getContainer\", \"mask\", \"maskClassName\", \"icons\", \"scaleStep\"];\nimport * as React from 'react';\nimport { useState } from 'react';\nimport cn from 'classnames';\nimport { getOffset } from \"rc-util/es/Dom/css\";\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport Preview from \"./Preview\";\nimport PreviewGroup, { context } from \"./PreviewGroup\";\nvar uuid = 0;\n\nfunction isImageValid(src) {\n  return new Promise(function (resolve) {\n    var img = document.createElement('img');\n\n    img.onerror = function () {\n      return resolve(false);\n    };\n\n    img.onload = function () {\n      return resolve(true);\n    };\n\n    img.src = src;\n  });\n}\n\nvar ImageInternal = function ImageInternal(_ref) {\n  var _imgCommonProps$style;\n\n  var imgSrc = _ref.src,\n      alt = _ref.alt,\n      onInitialPreviewClose = _ref.onPreviewClose,\n      _ref$prefixCls = _ref.prefixCls,\n      prefixCls = _ref$prefixCls === void 0 ? 'rc-image' : _ref$prefixCls,\n      _ref$previewPrefixCls = _ref.previewPrefixCls,\n      previewPrefixCls = _ref$previewPrefixCls === void 0 ? \"\".concat(prefixCls, \"-preview\") : _ref$previewPrefixCls,\n      placeholder = _ref.placeholder,\n      fallback = _ref.fallback,\n      width = _ref.width,\n      height = _ref.height,\n      style = _ref.style,\n      _ref$preview = _ref.preview,\n      preview = _ref$preview === void 0 ? true : _ref$preview,\n      className = _ref.className,\n      onClick = _ref.onClick,\n      onError = _ref.onError,\n      wrapperClassName = _ref.wrapperClassName,\n      wrapperStyle = _ref.wrapperStyle,\n      rootClassName = _ref.rootClassName,\n      crossOrigin = _ref.crossOrigin,\n      decoding = _ref.decoding,\n      loading = _ref.loading,\n      referrerPolicy = _ref.referrerPolicy,\n      sizes = _ref.sizes,\n      srcSet = _ref.srcSet,\n      useMap = _ref.useMap,\n      draggable = _ref.draggable,\n      otherProps = _objectWithoutProperties(_ref, _excluded);\n\n  var isCustomPlaceholder = placeholder && placeholder !== true;\n\n  var _ref2 = _typeof(preview) === 'object' ? preview : {},\n      previewSrc = _ref2.src,\n      _ref2$visible = _ref2.visible,\n      previewVisible = _ref2$visible === void 0 ? undefined : _ref2$visible,\n      _ref2$onVisibleChange = _ref2.onVisibleChange,\n      onPreviewVisibleChange = _ref2$onVisibleChange === void 0 ? onInitialPreviewClose : _ref2$onVisibleChange,\n      _ref2$getContainer = _ref2.getContainer,\n      getPreviewContainer = _ref2$getContainer === void 0 ? undefined : _ref2$getContainer,\n      previewMask = _ref2.mask,\n      maskClassName = _ref2.maskClassName,\n      icons = _ref2.icons,\n      scaleStep = _ref2.scaleStep,\n      dialogProps = _objectWithoutProperties(_ref2, _excluded2);\n\n  var src = previewSrc !== null && previewSrc !== void 0 ? previewSrc : imgSrc;\n  var isControlled = previewVisible !== undefined;\n\n  var _useMergedState = useMergedState(!!previewVisible, {\n    value: previewVisible,\n    onChange: onPreviewVisibleChange\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      isShowPreview = _useMergedState2[0],\n      setShowPreview = _useMergedState2[1];\n\n  var _useState = useState(isCustomPlaceholder ? 'loading' : 'normal'),\n      _useState2 = _slicedToArray(_useState, 2),\n      status = _useState2[0],\n      setStatus = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      mousePosition = _useState4[0],\n      setMousePosition = _useState4[1];\n\n  var isError = status === 'error';\n\n  var _React$useContext = React.useContext(context),\n      isPreviewGroup = _React$useContext.isPreviewGroup,\n      setCurrent = _React$useContext.setCurrent,\n      setGroupShowPreview = _React$useContext.setShowPreview,\n      setGroupMousePosition = _React$useContext.setMousePosition,\n      registerImage = _React$useContext.registerImage;\n\n  var _React$useState = React.useState(function () {\n    uuid += 1;\n    return uuid;\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 1),\n      currentId = _React$useState2[0];\n\n  var canPreview = !!preview;\n  var isLoaded = React.useRef(false);\n\n  var onLoad = function onLoad() {\n    setStatus('normal');\n  };\n\n  var onPreview = function onPreview(e) {\n    if (!isControlled) {\n      var _getOffset = getOffset(e.target),\n          left = _getOffset.left,\n          top = _getOffset.top;\n\n      if (isPreviewGroup) {\n        setCurrent(currentId);\n        setGroupMousePosition({\n          x: left,\n          y: top\n        });\n      } else {\n        setMousePosition({\n          x: left,\n          y: top\n        });\n      }\n    }\n\n    if (isPreviewGroup) {\n      setGroupShowPreview(true);\n    } else {\n      setShowPreview(true);\n    }\n\n    onClick === null || onClick === void 0 ? void 0 : onClick(e);\n  };\n\n  var onPreviewClose = function onPreviewClose(e) {\n    e.stopPropagation();\n    setShowPreview(false);\n\n    if (!isControlled) {\n      setMousePosition(null);\n    }\n  };\n\n  var getImgRef = function getImgRef(img) {\n    isLoaded.current = false;\n    if (status !== 'loading') return;\n\n    if (img !== null && img !== void 0 && img.complete && (img.naturalWidth || img.naturalHeight)) {\n      isLoaded.current = true;\n      onLoad();\n    }\n  };\n\n  React.useEffect(function () {\n    isImageValid(src).then(function (isValid) {\n      if (!isValid) {\n        setStatus('error');\n      }\n    });\n  }, [src]); // Keep order start\n  // Resolve https://github.com/ant-design/ant-design/issues/28881\n  // Only need unRegister when component unMount\n\n  React.useEffect(function () {\n    var unRegister = registerImage(currentId, src);\n    return unRegister;\n  }, []);\n  React.useEffect(function () {\n    registerImage(currentId, src, canPreview);\n  }, [src, canPreview]); // Keep order end\n\n  React.useEffect(function () {\n    if (isError) {\n      setStatus('normal');\n    }\n\n    if (isCustomPlaceholder && !isLoaded.current) {\n      setStatus('loading');\n    }\n  }, [imgSrc]);\n  var wrapperClass = cn(prefixCls, wrapperClassName, rootClassName, _defineProperty({}, \"\".concat(prefixCls, \"-error\"), isError));\n  var mergedSrc = isError && fallback ? fallback : src;\n  var imgCommonProps = {\n    crossOrigin: crossOrigin,\n    decoding: decoding,\n    draggable: draggable,\n    loading: loading,\n    referrerPolicy: referrerPolicy,\n    sizes: sizes,\n    srcSet: srcSet,\n    useMap: useMap,\n    onError: onError,\n    alt: alt,\n    className: cn(\"\".concat(prefixCls, \"-img\"), _defineProperty({}, \"\".concat(prefixCls, \"-img-placeholder\"), placeholder === true), className),\n    style: _objectSpread({\n      height: height\n    }, style)\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", _extends({}, otherProps, {\n    className: wrapperClass,\n    onClick: canPreview ? onPreview : onClick,\n    style: _objectSpread({\n      width: width,\n      height: height\n    }, wrapperStyle)\n  }), /*#__PURE__*/React.createElement(\"img\", _extends({}, imgCommonProps, {\n    ref: getImgRef\n  }, isError && fallback ? {\n    src: fallback\n  } : {\n    onLoad: onLoad,\n    src: imgSrc\n  }, {\n    width: width,\n    height: height\n  })), status === 'loading' && /*#__PURE__*/React.createElement(\"div\", {\n    \"aria-hidden\": \"true\",\n    className: \"\".concat(prefixCls, \"-placeholder\")\n  }, placeholder), previewMask && canPreview && /*#__PURE__*/React.createElement(\"div\", {\n    className: cn(\"\".concat(prefixCls, \"-mask\"), maskClassName),\n    style: {\n      display: ((_imgCommonProps$style = imgCommonProps.style) === null || _imgCommonProps$style === void 0 ? void 0 : _imgCommonProps$style.display) === 'none' ? 'none' : undefined\n    }\n  }, previewMask)), !isPreviewGroup && canPreview && /*#__PURE__*/React.createElement(Preview, _extends({\n    \"aria-hidden\": !isShowPreview,\n    visible: isShowPreview,\n    prefixCls: previewPrefixCls,\n    onClose: onPreviewClose,\n    mousePosition: mousePosition,\n    src: mergedSrc,\n    alt: alt,\n    getContainer: getPreviewContainer,\n    icons: icons,\n    scaleStep: scaleStep,\n    rootClassName: rootClassName\n  }, dialogProps)));\n};\n\nImageInternal.PreviewGroup = PreviewGroup;\nImageInternal.displayName = 'Image';\nexport default ImageInternal;","map":{"version":3,"sources":["/Users/luna/Desktop/Project/Git Project/rick-Morty/node_modules/rc-image/es/Image.js"],"names":["_extends","_objectSpread","_defineProperty","_slicedToArray","_typeof","_objectWithoutProperties","_excluded","_excluded2","React","useState","cn","getOffset","useMergedState","Preview","PreviewGroup","context","uuid","isImageValid","src","Promise","resolve","img","document","createElement","onerror","onload","ImageInternal","_ref","_imgCommonProps$style","imgSrc","alt","onInitialPreviewClose","onPreviewClose","_ref$prefixCls","prefixCls","_ref$previewPrefixCls","previewPrefixCls","concat","placeholder","fallback","width","height","style","_ref$preview","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName","crossOrigin","decoding","loading","referrerPolicy","sizes","srcSet","useMap","draggable","otherProps","isCustomPlaceholder","_ref2","previewSrc","_ref2$visible","visible","previewVisible","undefined","_ref2$onVisibleChange","onVisibleChange","onPreviewVisibleChange","_ref2$getContainer","getContainer","getPreviewContainer","previewMask","mask","maskClassName","icons","scaleStep","dialogProps","isControlled","_useMergedState","value","onChange","_useMergedState2","isShowPreview","setShowPreview","_useState","_useState2","status","setStatus","_useState3","_useState4","mousePosition","setMousePosition","isError","_React$useContext","useContext","isPreviewGroup","setCurrent","setGroupShowPreview","setGroupMousePosition","registerImage","_React$useState","_React$useState2","currentId","canPreview","isLoaded","useRef","onLoad","onPreview","e","_getOffset","target","left","top","x","y","stopPropagation","getImgRef","current","complete","naturalWidth","naturalHeight","useEffect","then","isValid","unRegister","wrapperClass","mergedSrc","imgCommonProps","Fragment","ref","display","onClose","displayName"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"src\", \"alt\", \"onPreviewClose\", \"prefixCls\", \"previewPrefixCls\", \"placeholder\", \"fallback\", \"width\", \"height\", \"style\", \"preview\", \"className\", \"onClick\", \"onError\", \"wrapperClassName\", \"wrapperStyle\", \"rootClassName\", \"crossOrigin\", \"decoding\", \"loading\", \"referrerPolicy\", \"sizes\", \"srcSet\", \"useMap\", \"draggable\"],\n  _excluded2 = [\"src\", \"visible\", \"onVisibleChange\", \"getContainer\", \"mask\", \"maskClassName\", \"icons\", \"scaleStep\"];\nimport * as React from 'react';\nimport { useState } from 'react';\nimport cn from 'classnames';\nimport { getOffset } from \"rc-util/es/Dom/css\";\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport Preview from \"./Preview\";\nimport PreviewGroup, { context } from \"./PreviewGroup\";\nvar uuid = 0;\nfunction isImageValid(src) {\n  return new Promise(function (resolve) {\n    var img = document.createElement('img');\n    img.onerror = function () {\n      return resolve(false);\n    };\n    img.onload = function () {\n      return resolve(true);\n    };\n    img.src = src;\n  });\n}\nvar ImageInternal = function ImageInternal(_ref) {\n  var _imgCommonProps$style;\n  var imgSrc = _ref.src,\n    alt = _ref.alt,\n    onInitialPreviewClose = _ref.onPreviewClose,\n    _ref$prefixCls = _ref.prefixCls,\n    prefixCls = _ref$prefixCls === void 0 ? 'rc-image' : _ref$prefixCls,\n    _ref$previewPrefixCls = _ref.previewPrefixCls,\n    previewPrefixCls = _ref$previewPrefixCls === void 0 ? \"\".concat(prefixCls, \"-preview\") : _ref$previewPrefixCls,\n    placeholder = _ref.placeholder,\n    fallback = _ref.fallback,\n    width = _ref.width,\n    height = _ref.height,\n    style = _ref.style,\n    _ref$preview = _ref.preview,\n    preview = _ref$preview === void 0 ? true : _ref$preview,\n    className = _ref.className,\n    onClick = _ref.onClick,\n    onError = _ref.onError,\n    wrapperClassName = _ref.wrapperClassName,\n    wrapperStyle = _ref.wrapperStyle,\n    rootClassName = _ref.rootClassName,\n    crossOrigin = _ref.crossOrigin,\n    decoding = _ref.decoding,\n    loading = _ref.loading,\n    referrerPolicy = _ref.referrerPolicy,\n    sizes = _ref.sizes,\n    srcSet = _ref.srcSet,\n    useMap = _ref.useMap,\n    draggable = _ref.draggable,\n    otherProps = _objectWithoutProperties(_ref, _excluded);\n  var isCustomPlaceholder = placeholder && placeholder !== true;\n  var _ref2 = _typeof(preview) === 'object' ? preview : {},\n    previewSrc = _ref2.src,\n    _ref2$visible = _ref2.visible,\n    previewVisible = _ref2$visible === void 0 ? undefined : _ref2$visible,\n    _ref2$onVisibleChange = _ref2.onVisibleChange,\n    onPreviewVisibleChange = _ref2$onVisibleChange === void 0 ? onInitialPreviewClose : _ref2$onVisibleChange,\n    _ref2$getContainer = _ref2.getContainer,\n    getPreviewContainer = _ref2$getContainer === void 0 ? undefined : _ref2$getContainer,\n    previewMask = _ref2.mask,\n    maskClassName = _ref2.maskClassName,\n    icons = _ref2.icons,\n    scaleStep = _ref2.scaleStep,\n    dialogProps = _objectWithoutProperties(_ref2, _excluded2);\n  var src = previewSrc !== null && previewSrc !== void 0 ? previewSrc : imgSrc;\n  var isControlled = previewVisible !== undefined;\n  var _useMergedState = useMergedState(!!previewVisible, {\n      value: previewVisible,\n      onChange: onPreviewVisibleChange\n    }),\n    _useMergedState2 = _slicedToArray(_useMergedState, 2),\n    isShowPreview = _useMergedState2[0],\n    setShowPreview = _useMergedState2[1];\n  var _useState = useState(isCustomPlaceholder ? 'loading' : 'normal'),\n    _useState2 = _slicedToArray(_useState, 2),\n    status = _useState2[0],\n    setStatus = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    mousePosition = _useState4[0],\n    setMousePosition = _useState4[1];\n  var isError = status === 'error';\n  var _React$useContext = React.useContext(context),\n    isPreviewGroup = _React$useContext.isPreviewGroup,\n    setCurrent = _React$useContext.setCurrent,\n    setGroupShowPreview = _React$useContext.setShowPreview,\n    setGroupMousePosition = _React$useContext.setMousePosition,\n    registerImage = _React$useContext.registerImage;\n  var _React$useState = React.useState(function () {\n      uuid += 1;\n      return uuid;\n    }),\n    _React$useState2 = _slicedToArray(_React$useState, 1),\n    currentId = _React$useState2[0];\n  var canPreview = !!preview;\n  var isLoaded = React.useRef(false);\n  var onLoad = function onLoad() {\n    setStatus('normal');\n  };\n  var onPreview = function onPreview(e) {\n    if (!isControlled) {\n      var _getOffset = getOffset(e.target),\n        left = _getOffset.left,\n        top = _getOffset.top;\n      if (isPreviewGroup) {\n        setCurrent(currentId);\n        setGroupMousePosition({\n          x: left,\n          y: top\n        });\n      } else {\n        setMousePosition({\n          x: left,\n          y: top\n        });\n      }\n    }\n    if (isPreviewGroup) {\n      setGroupShowPreview(true);\n    } else {\n      setShowPreview(true);\n    }\n    onClick === null || onClick === void 0 ? void 0 : onClick(e);\n  };\n  var onPreviewClose = function onPreviewClose(e) {\n    e.stopPropagation();\n    setShowPreview(false);\n    if (!isControlled) {\n      setMousePosition(null);\n    }\n  };\n  var getImgRef = function getImgRef(img) {\n    isLoaded.current = false;\n    if (status !== 'loading') return;\n    if (img !== null && img !== void 0 && img.complete && (img.naturalWidth || img.naturalHeight)) {\n      isLoaded.current = true;\n      onLoad();\n    }\n  };\n  React.useEffect(function () {\n    isImageValid(src).then(function (isValid) {\n      if (!isValid) {\n        setStatus('error');\n      }\n    });\n  }, [src]);\n\n  // Keep order start\n  // Resolve https://github.com/ant-design/ant-design/issues/28881\n  // Only need unRegister when component unMount\n  React.useEffect(function () {\n    var unRegister = registerImage(currentId, src);\n    return unRegister;\n  }, []);\n  React.useEffect(function () {\n    registerImage(currentId, src, canPreview);\n  }, [src, canPreview]);\n  // Keep order end\n\n  React.useEffect(function () {\n    if (isError) {\n      setStatus('normal');\n    }\n    if (isCustomPlaceholder && !isLoaded.current) {\n      setStatus('loading');\n    }\n  }, [imgSrc]);\n  var wrapperClass = cn(prefixCls, wrapperClassName, rootClassName, _defineProperty({}, \"\".concat(prefixCls, \"-error\"), isError));\n  var mergedSrc = isError && fallback ? fallback : src;\n  var imgCommonProps = {\n    crossOrigin: crossOrigin,\n    decoding: decoding,\n    draggable: draggable,\n    loading: loading,\n    referrerPolicy: referrerPolicy,\n    sizes: sizes,\n    srcSet: srcSet,\n    useMap: useMap,\n    onError: onError,\n    alt: alt,\n    className: cn(\"\".concat(prefixCls, \"-img\"), _defineProperty({}, \"\".concat(prefixCls, \"-img-placeholder\"), placeholder === true), className),\n    style: _objectSpread({\n      height: height\n    }, style)\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", _extends({}, otherProps, {\n    className: wrapperClass,\n    onClick: canPreview ? onPreview : onClick,\n    style: _objectSpread({\n      width: width,\n      height: height\n    }, wrapperStyle)\n  }), /*#__PURE__*/React.createElement(\"img\", _extends({}, imgCommonProps, {\n    ref: getImgRef\n  }, isError && fallback ? {\n    src: fallback\n  } : {\n    onLoad: onLoad,\n    src: imgSrc\n  }, {\n    width: width,\n    height: height\n  })), status === 'loading' && /*#__PURE__*/React.createElement(\"div\", {\n    \"aria-hidden\": \"true\",\n    className: \"\".concat(prefixCls, \"-placeholder\")\n  }, placeholder), previewMask && canPreview && /*#__PURE__*/React.createElement(\"div\", {\n    className: cn(\"\".concat(prefixCls, \"-mask\"), maskClassName),\n    style: {\n      display: ((_imgCommonProps$style = imgCommonProps.style) === null || _imgCommonProps$style === void 0 ? void 0 : _imgCommonProps$style.display) === 'none' ? 'none' : undefined\n    }\n  }, previewMask)), !isPreviewGroup && canPreview && /*#__PURE__*/React.createElement(Preview, _extends({\n    \"aria-hidden\": !isShowPreview,\n    visible: isShowPreview,\n    prefixCls: previewPrefixCls,\n    onClose: onPreviewClose,\n    mousePosition: mousePosition,\n    src: mergedSrc,\n    alt: alt,\n    getContainer: getPreviewContainer,\n    icons: icons,\n    scaleStep: scaleStep,\n    rootClassName: rootClassName\n  }, dialogProps)));\n};\nImageInternal.PreviewGroup = PreviewGroup;\nImageInternal.displayName = 'Image';\nexport default ImageInternal;"]},"metadata":{},"sourceType":"module"}