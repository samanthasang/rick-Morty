{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"visible\", \"onVisibleChange\", \"getContainer\", \"current\", \"countRender\", \"onChange\"];\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport * as React from 'react';\nimport { useState } from 'react';\nimport Preview from \"./Preview\";\n/* istanbul ignore next */\n\nexport var context = /*#__PURE__*/React.createContext({\n  previewUrls: new Map(),\n  setPreviewUrls: function setPreviewUrls() {\n    return null;\n  },\n  current: null,\n  setCurrent: function setCurrent() {\n    return null;\n  },\n  setShowPreview: function setShowPreview() {\n    return null;\n  },\n  setMousePosition: function setMousePosition() {\n    return null;\n  },\n  registerImage: function registerImage() {\n    return function () {\n      return null;\n    };\n  },\n  rootClassName: ''\n});\nvar Provider = context.Provider;\n\nfunction getSafeIndex(keys, key) {\n  if (key === undefined) return undefined;\n  var index = keys.indexOf(key);\n  if (index === -1) return undefined;\n  return index;\n}\n\nvar Group = function Group(_ref) {\n  var _ref$previewPrefixCls = _ref.previewPrefixCls,\n      previewPrefixCls = _ref$previewPrefixCls === void 0 ? 'rc-image-preview' : _ref$previewPrefixCls,\n      children = _ref.children,\n      _ref$icons = _ref.icons,\n      icons = _ref$icons === void 0 ? {} : _ref$icons,\n      preview = _ref.preview;\n\n  var _ref2 = _typeof(preview) === 'object' ? preview : {},\n      _ref2$visible = _ref2.visible,\n      previewVisible = _ref2$visible === void 0 ? undefined : _ref2$visible,\n      _ref2$onVisibleChange = _ref2.onVisibleChange,\n      onPreviewVisibleChange = _ref2$onVisibleChange === void 0 ? undefined : _ref2$onVisibleChange,\n      _ref2$getContainer = _ref2.getContainer,\n      getContainer = _ref2$getContainer === void 0 ? undefined : _ref2$getContainer,\n      _ref2$current = _ref2.current,\n      currentIndex = _ref2$current === void 0 ? 0 : _ref2$current,\n      _ref2$countRender = _ref2.countRender,\n      countRender = _ref2$countRender === void 0 ? undefined : _ref2$countRender,\n      _ref2$onChange = _ref2.onChange,\n      _onChange = _ref2$onChange === void 0 ? undefined : _ref2$onChange,\n      dialogProps = _objectWithoutProperties(_ref2, _excluded);\n\n  var _useState = useState(new Map()),\n      _useState2 = _slicedToArray(_useState, 2),\n      previewUrls = _useState2[0],\n      setPreviewUrls = _useState2[1];\n\n  var previewUrlsKeys = Array.from(previewUrls.keys());\n  var prevCurrent = React.useRef();\n\n  var _useMergedState = useMergedState(undefined, {\n    onChange: function onChange(val, prev) {\n      if (prevCurrent.current !== undefined) {\n        _onChange === null || _onChange === void 0 ? void 0 : _onChange(getSafeIndex(previewUrlsKeys, val), getSafeIndex(previewUrlsKeys, prev));\n      }\n\n      prevCurrent.current = prev;\n    }\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      current = _useMergedState2[0],\n      setCurrent = _useMergedState2[1];\n\n  var _useMergedState3 = useMergedState(!!previewVisible, {\n    value: previewVisible,\n    onChange: function onChange(val, prevVal) {\n      onPreviewVisibleChange === null || onPreviewVisibleChange === void 0 ? void 0 : onPreviewVisibleChange(val, prevVal, getSafeIndex(previewUrlsKeys, current));\n      prevCurrent.current = val ? current : undefined;\n    }\n  }),\n      _useMergedState4 = _slicedToArray(_useMergedState3, 2),\n      isShowPreview = _useMergedState4[0],\n      setShowPreview = _useMergedState4[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      mousePosition = _useState4[0],\n      setMousePosition = _useState4[1];\n\n  var isControlled = previewVisible !== undefined;\n  var currentControlledKey = previewUrlsKeys[currentIndex];\n  var canPreviewUrls = new Map(Array.from(previewUrls).filter(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n        canPreview = _ref4[1].canPreview;\n\n    return !!canPreview;\n  }).map(function (_ref5) {\n    var _ref6 = _slicedToArray(_ref5, 2),\n        id = _ref6[0],\n        url = _ref6[1].url;\n\n    return [id, url];\n  }));\n\n  var registerImage = function registerImage(id, url) {\n    var canPreview = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n    var unRegister = function unRegister() {\n      setPreviewUrls(function (oldPreviewUrls) {\n        var clonePreviewUrls = new Map(oldPreviewUrls);\n        var deleteResult = clonePreviewUrls.delete(id);\n        return deleteResult ? clonePreviewUrls : oldPreviewUrls;\n      });\n    };\n\n    setPreviewUrls(function (oldPreviewUrls) {\n      return new Map(oldPreviewUrls).set(id, {\n        url: url,\n        canPreview: canPreview\n      });\n    });\n    return unRegister;\n  };\n\n  var onPreviewClose = function onPreviewClose(e) {\n    e.stopPropagation();\n    setShowPreview(false);\n    setMousePosition(null);\n  };\n\n  React.useEffect(function () {\n    setCurrent(currentControlledKey);\n  }, [currentControlledKey]);\n  React.useEffect(function () {\n    if (!isShowPreview && isControlled) {\n      setCurrent(currentControlledKey);\n    }\n  }, [currentControlledKey, isControlled, isShowPreview]);\n  return /*#__PURE__*/React.createElement(Provider, {\n    value: {\n      isPreviewGroup: true,\n      previewUrls: canPreviewUrls,\n      setPreviewUrls: setPreviewUrls,\n      current: current,\n      setCurrent: setCurrent,\n      setShowPreview: setShowPreview,\n      setMousePosition: setMousePosition,\n      registerImage: registerImage\n    }\n  }, children, /*#__PURE__*/React.createElement(Preview, _extends({\n    \"aria-hidden\": !isShowPreview,\n    visible: isShowPreview,\n    prefixCls: previewPrefixCls,\n    onClose: onPreviewClose,\n    mousePosition: mousePosition,\n    src: canPreviewUrls.get(current),\n    icons: icons,\n    getContainer: getContainer,\n    countRender: countRender\n  }, dialogProps)));\n};\n\nexport default Group;","map":{"version":3,"sources":["/Users/luna/Desktop/Project/Git Project/rick-Morty/node_modules/rc-image/es/PreviewGroup.js"],"names":["_extends","_slicedToArray","_typeof","_objectWithoutProperties","_excluded","useMergedState","React","useState","Preview","context","createContext","previewUrls","Map","setPreviewUrls","current","setCurrent","setShowPreview","setMousePosition","registerImage","rootClassName","Provider","getSafeIndex","keys","key","undefined","index","indexOf","Group","_ref","_ref$previewPrefixCls","previewPrefixCls","children","_ref$icons","icons","preview","_ref2","_ref2$visible","visible","previewVisible","_ref2$onVisibleChange","onVisibleChange","onPreviewVisibleChange","_ref2$getContainer","getContainer","_ref2$current","currentIndex","_ref2$countRender","countRender","_ref2$onChange","onChange","_onChange","dialogProps","_useState","_useState2","previewUrlsKeys","Array","from","prevCurrent","useRef","_useMergedState","val","prev","_useMergedState2","_useMergedState3","value","prevVal","_useMergedState4","isShowPreview","_useState3","_useState4","mousePosition","isControlled","currentControlledKey","canPreviewUrls","filter","_ref3","_ref4","canPreview","map","_ref5","_ref6","id","url","arguments","length","unRegister","oldPreviewUrls","clonePreviewUrls","deleteResult","delete","set","onPreviewClose","e","stopPropagation","useEffect","createElement","isPreviewGroup","prefixCls","onClose","src","get"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"visible\", \"onVisibleChange\", \"getContainer\", \"current\", \"countRender\", \"onChange\"];\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport * as React from 'react';\nimport { useState } from 'react';\nimport Preview from \"./Preview\";\n/* istanbul ignore next */\nexport var context = /*#__PURE__*/React.createContext({\n  previewUrls: new Map(),\n  setPreviewUrls: function setPreviewUrls() {\n    return null;\n  },\n  current: null,\n  setCurrent: function setCurrent() {\n    return null;\n  },\n  setShowPreview: function setShowPreview() {\n    return null;\n  },\n  setMousePosition: function setMousePosition() {\n    return null;\n  },\n  registerImage: function registerImage() {\n    return function () {\n      return null;\n    };\n  },\n  rootClassName: ''\n});\nvar Provider = context.Provider;\nfunction getSafeIndex(keys, key) {\n  if (key === undefined) return undefined;\n  var index = keys.indexOf(key);\n  if (index === -1) return undefined;\n  return index;\n}\nvar Group = function Group(_ref) {\n  var _ref$previewPrefixCls = _ref.previewPrefixCls,\n    previewPrefixCls = _ref$previewPrefixCls === void 0 ? 'rc-image-preview' : _ref$previewPrefixCls,\n    children = _ref.children,\n    _ref$icons = _ref.icons,\n    icons = _ref$icons === void 0 ? {} : _ref$icons,\n    preview = _ref.preview;\n  var _ref2 = _typeof(preview) === 'object' ? preview : {},\n    _ref2$visible = _ref2.visible,\n    previewVisible = _ref2$visible === void 0 ? undefined : _ref2$visible,\n    _ref2$onVisibleChange = _ref2.onVisibleChange,\n    onPreviewVisibleChange = _ref2$onVisibleChange === void 0 ? undefined : _ref2$onVisibleChange,\n    _ref2$getContainer = _ref2.getContainer,\n    getContainer = _ref2$getContainer === void 0 ? undefined : _ref2$getContainer,\n    _ref2$current = _ref2.current,\n    currentIndex = _ref2$current === void 0 ? 0 : _ref2$current,\n    _ref2$countRender = _ref2.countRender,\n    countRender = _ref2$countRender === void 0 ? undefined : _ref2$countRender,\n    _ref2$onChange = _ref2.onChange,\n    _onChange = _ref2$onChange === void 0 ? undefined : _ref2$onChange,\n    dialogProps = _objectWithoutProperties(_ref2, _excluded);\n  var _useState = useState(new Map()),\n    _useState2 = _slicedToArray(_useState, 2),\n    previewUrls = _useState2[0],\n    setPreviewUrls = _useState2[1];\n  var previewUrlsKeys = Array.from(previewUrls.keys());\n  var prevCurrent = React.useRef();\n  var _useMergedState = useMergedState(undefined, {\n      onChange: function onChange(val, prev) {\n        if (prevCurrent.current !== undefined) {\n          _onChange === null || _onChange === void 0 ? void 0 : _onChange(getSafeIndex(previewUrlsKeys, val), getSafeIndex(previewUrlsKeys, prev));\n        }\n        prevCurrent.current = prev;\n      }\n    }),\n    _useMergedState2 = _slicedToArray(_useMergedState, 2),\n    current = _useMergedState2[0],\n    setCurrent = _useMergedState2[1];\n  var _useMergedState3 = useMergedState(!!previewVisible, {\n      value: previewVisible,\n      onChange: function onChange(val, prevVal) {\n        onPreviewVisibleChange === null || onPreviewVisibleChange === void 0 ? void 0 : onPreviewVisibleChange(val, prevVal, getSafeIndex(previewUrlsKeys, current));\n        prevCurrent.current = val ? current : undefined;\n      }\n    }),\n    _useMergedState4 = _slicedToArray(_useMergedState3, 2),\n    isShowPreview = _useMergedState4[0],\n    setShowPreview = _useMergedState4[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    mousePosition = _useState4[0],\n    setMousePosition = _useState4[1];\n  var isControlled = previewVisible !== undefined;\n  var currentControlledKey = previewUrlsKeys[currentIndex];\n  var canPreviewUrls = new Map(Array.from(previewUrls).filter(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n      canPreview = _ref4[1].canPreview;\n    return !!canPreview;\n  }).map(function (_ref5) {\n    var _ref6 = _slicedToArray(_ref5, 2),\n      id = _ref6[0],\n      url = _ref6[1].url;\n    return [id, url];\n  }));\n  var registerImage = function registerImage(id, url) {\n    var canPreview = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    var unRegister = function unRegister() {\n      setPreviewUrls(function (oldPreviewUrls) {\n        var clonePreviewUrls = new Map(oldPreviewUrls);\n        var deleteResult = clonePreviewUrls.delete(id);\n        return deleteResult ? clonePreviewUrls : oldPreviewUrls;\n      });\n    };\n    setPreviewUrls(function (oldPreviewUrls) {\n      return new Map(oldPreviewUrls).set(id, {\n        url: url,\n        canPreview: canPreview\n      });\n    });\n    return unRegister;\n  };\n  var onPreviewClose = function onPreviewClose(e) {\n    e.stopPropagation();\n    setShowPreview(false);\n    setMousePosition(null);\n  };\n  React.useEffect(function () {\n    setCurrent(currentControlledKey);\n  }, [currentControlledKey]);\n  React.useEffect(function () {\n    if (!isShowPreview && isControlled) {\n      setCurrent(currentControlledKey);\n    }\n  }, [currentControlledKey, isControlled, isShowPreview]);\n  return /*#__PURE__*/React.createElement(Provider, {\n    value: {\n      isPreviewGroup: true,\n      previewUrls: canPreviewUrls,\n      setPreviewUrls: setPreviewUrls,\n      current: current,\n      setCurrent: setCurrent,\n      setShowPreview: setShowPreview,\n      setMousePosition: setMousePosition,\n      registerImage: registerImage\n    }\n  }, children, /*#__PURE__*/React.createElement(Preview, _extends({\n    \"aria-hidden\": !isShowPreview,\n    visible: isShowPreview,\n    prefixCls: previewPrefixCls,\n    onClose: onPreviewClose,\n    mousePosition: mousePosition,\n    src: canPreviewUrls.get(current),\n    icons: icons,\n    getContainer: getContainer,\n    countRender: countRender\n  }, dialogProps)));\n};\nexport default Group;"]},"metadata":{},"sourceType":"module"}